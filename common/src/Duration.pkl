module pkl.ci.common.Duration

/// Duration with validation and conversion utilities
/// Represents a time duration with a value and unit, providing
/// conversion methods for different time representations.
class Duration {
  /// The numeric value of the duration
  /// Must be a positive integer.
  value: Int(this > 0, "Duration value must be positive")
  
  /// The unit of time for the duration
  /// Supported units: seconds, minutes, hours
  unit: "seconds"|"minutes"|"hours"
  
  /// Converts the duration to seconds
  /// Returns the total number of seconds represented by this duration.
  function toSeconds(): Int = when (unit) {
    "seconds" -> value
    "minutes" -> value * 60
    "hours" -> value * 3600
    else -> throw("Invalid duration unit")
  }
  
  /// Converts the duration to minutes
  /// Returns the total number of minutes represented by this duration.
  /// Fractional minutes are rounded down.
  function toMinutes(): Int = when (unit) {
    "seconds" -> value / 60
    "minutes" -> value
    "hours" -> value * 60
    else -> throw("Invalid duration unit")
  }
  
  /// Converts the duration to hours
  /// Returns the total number of hours represented by this duration.
  /// Fractional hours are rounded down.
  function toHours(): Int = when (unit) {
    "seconds" -> value / 3600
    "minutes" -> value / 60
    "hours" -> value
    else -> throw("Invalid duration unit")
  }
}
